#+TITLE: Emacs Config
#+AUTHOR: Zach Dodge

#+begin_src elisp
(setq user-full-name "Zachary Dodge"
      user-mail-address "zacharysdodge@gmail.com")
#+end_src

#+RESULTS:
: zacharysdodge@gmail.com

#+begin_src elisp
(setq doom-theme 'doom-dracula)
(setq doom-font (font-spec :family "Hack Nerd Font Mono" :size 16))
#+end_src

#+RESULTS:
: #<font-spec nil nil Hack\ Nerd\ Font\ Mono nil nil nil nil nil 16 nil nil nil nil>

#+begin_src elisp
(setq org-support-shift-select t)
#+end_src

#+RESULTS:
: t

- Display (absolute) line numbers
- Tell projectile to only search non-gitignored files
- Blink the cursor
- Don't require confirmation to exit emacs
- Disable scroll wheel "acceleration"
#+begin_src elisp
(setq display-line-numbers-type t)
(setq projectile-indexing-method 'alien)
(blink-cursor-mode)
(setq confirm-kill-emacs nil)
(setq mouse-wheel-progressive-speed nil)
#+end_src

#+RESULTS:

- Make Emacs and User the only two tab groups
- Use delta mode in magit
- Enable minimap
#+begin_src elisp
(defun centaur-tabs-buffer-groups ()
  (list
    (cond
      ((string-equal "*" (substring (buffer-name) 0 1)) "Emacs")
      (t "User"))))
(use-package! magit-delta
  :hook (magit-mode . magit-delta-mode))
(use-package! minimap
  :config
  (minimap-mode))
#+end_src

#+RESULTS:
: t

Make the escape key quit (as opposed to triple escape)
#+begin_src elisp
(global-set-key (kbd "<escape>") 'keyboard-escape-quit)
#+end_src

#+RESULTS:
: keyboard-escape-quit

Utility functions
#+begin_src elisp
(defun wsl-p () (string-match "WSL" operating-system-release))
(defun wsl-default (a b) (if (wsl-p) a b))
#+end_src

#+RESULTS:
: wsl-default

Size the frame to be proportional to the display.
The default proportion is 0.8 of width and height.
My personal computer uses emacs in WSL which doesn't provide the correct display size so this defaults to 2560x1440 when in WSL.
#+begin_src elisp
(defun set-ideal-frame-size (&optional proportion)
  (when window-system
    (let* ((proportion (or proportion 0.8))
           (margin (/ (- 1 proportion) 2))
           (display-width (wsl-default 2560 (display-pixel-width)))
           (display-height (wsl-default 1440 (display-pixel-height)))
           (width (truncate (* display-width proportion)))
           (height (truncate (* display-height proportion)))
           (margin-left (truncate (* display-width margin)))
           (margin-top (truncate (* display-height margin))))

          (set-frame-size (selected-frame) width height t)
          (set-frame-position (selected-frame) margin-left margin-top))))
(set-ideal-frame-size 0.8)
#+end_src

#+RESULTS:
: t
